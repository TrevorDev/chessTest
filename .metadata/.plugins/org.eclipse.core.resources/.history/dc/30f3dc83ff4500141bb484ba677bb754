package chessTest;

import java.util.Scanner;

import boards.Board;

public class TextView implements View {
	Board board;
	public TextView(Board b){
		this.board=b;
	}
	
	@Override
	public void drawBoard() {
		System.out.println("   a b c d e f g h");
		System.out.println("   - - - - - - - -");
		for(int i=0;i<board.tiles.length;i++){
			System.out.print((board.tiles.length-i)+" |");
			for(int j=0;j<board.tiles[0].length;j++){
				
				char out = 'ยบ';
				if((i+j)%2==0){
					out = 'ร';
				}
				Piece p = board.tiles[i][j].curPiece;
				if(p!=null){
					//System.out.println(p.name);
					if(p.name == PieceName.BISHOP){
						out = 'b';
					}else if(p.name == PieceName.PAWN){
						out = 'p';
					}else if(p.name == PieceName.ROOK){
						out = 'r';
					}else if(p.name == PieceName.KNIGHT){
						out = 'n';
					}else if(p.name == PieceName.KING){
						out = 'k';
					}else if(p.name == PieceName.QUEEN){
						out = 'q';
					}
					if(p.color == Color.WHITE){
						 out = Character.toUpperCase(out);
					}
				}				
				System.out.print(out+" ");
			}
			System.out.println("|");
		}
		System.out.println("   - - - - - - - -");
	}

	@Override
	public Coord[] getMove() {
		String errorMsg = "Invalid input. Enter you're move eg(A2,A3)";
		
		String input = "";
		input = in.nextLine();
		input = input.toLowerCase();
		input = input.replaceAll("[^A-Za-z0-9]", "");
		
		if(input.length()!=4){
			System.out.println(errorMsg);
			return null;
		}
		
		
		try{
			Coord fromCoord;
			Coord toCoord;
			fromCoord = createCoord(input.toCharArray()[0], input.toCharArray()[1]);
			toCoord = createCoord(input.toCharArray()[2], input.toCharArray()[3]);
			Coord[] ret = new Coord[2];
			ret[0]=fromCoord;
			ret[0]=toCoord;
			return ret; 
		}catch(Exception e){
			System.out.println(errorMsg);
		}
		return null;
	}
	
	public Coord createCoord(char alpha, char num) throws Exception{
			int x = alpha - 'a';
			int y = Integer.parseInt(num+"")-1;
			return new Coord(x, y);
	}

}
